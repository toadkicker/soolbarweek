<div class="flex-column">
  <% if user_is_admin? %>
      <div class="flex-row text-right">
        <%= link_to new_event_path, class: 'btn btn-outline-success' do %>
            <%= fa_icon('plus') %>
            <%= t('new_event') %>
        <% end %>
      </div>
  <% end %>
  <div class="mb-4">
    <% @events.each do |dayz| %>
        <h1 class="text-danger"><%= dayz[0].strftime("%A %d") %></h1>
        <hr class="mt-0">
        <% @gs = dayz[1].select {|e| e.filter_type == "guest_shift"} %>
        <% @mc = dayz[1].select {|e| e.filter_type == "masterclass"} %>
        <% if @mc.length > 0 %>
            <% @mc.each do |event| %>
                <% if user_is_admin? %>
                    <div class="float-right">
                      <%= link_to t('edit'), edit_event_path(event), class: 'btn btn-sm btn-outline-primary' %>
                      <%= link_to t('destroy'), event, method: :delete, data: {confirm: 'Are you sure?'}, class: 'btn btn-sm btn-outline-danger' %>
                    </div>
                <% end %>
                <% if event[:video_url] %>
                    <video class="card-img-top mw-100" loop muted autoplay preload="auto">
                      <source src="<%= event[:video_url] %>" type="video/quicktime">
                    </video>
                <% end %>
                <% if event[:image_url] %>
                    <img class="card-img-top" src="<%= event[:image_url] %>" alt="<%= event[:image_alt] %>">
                <% end %>
                <% if event.filter_type.downcase.eql? 'masterclass' %>
                    <div class="row pb-4">
                      <div class="col-3">
                        <b><%= event.start_time.strftime("%I:%M %p") %>&nbsp;&ndash;&nbsp;<%= event.end_time.strftime("%I:%M %p") %></b>
                      </div>
                      <div class="col">
                        <p class="my-0"><%= link_to t("event.#{event.id}.title", default: event.title), event_path(event) %></p>
                        <small><%= t("event.#{event.id}.short_description".html_safe, default: event.short_description.html_safe) %></small>
                      </div>
                      <div class="col"><%= link_to event.profile.name, profile_path(event.profile) unless !event.profile.is_active %></div>
                    </div>
                <% end %>
            <% end %>
        <% end %>
        <% if @gs.length > 0 %>
            <div class="row pb-3">
              <div class="col-3 border border-left-0">
                <p class="text-muted mb-0">
                  <%= t('guest_shift') %>
                </p>
                <p class="text-muted mb-0">
                  <%= @gs.first.start_time.strftime("%I:%M %p") %>&nbsp;&ndash;&nbsp;<%= @gs.first.end_time.strftime("%I:%M %p") %>
                </p>
              </div>
              <div class="col border border-right-0 border-left-0">
                <% @gs.each do |gs| %>
                    <% unless gs.nil? %>
                        <p class="my-0">
                          <%= link_to gs.profile.name, profile_path(gs.profile) %>
                          <%= fa_icon('at') %>
                          <%= link_to t("gs.#{gs.id}.location.name", default: gs.location.name), location_path(gs.location) %>
                          <%= content_tag :b, class: 'badge badge-info' do %>
                              <%= link_to t('Info'), event_url(gs.id), class: 'text-white' %>
                          <% end %>
                          <% if user_is_admin? %>
                            <span>
                              <%= link_to t('edit'), edit_event_path(gs), class: 'btn btn-sm btn-outline-primary' %>
                              <%= link_to t('destroy'), gs, method: :delete, data: {confirm: 'Are you sure?'}, class: 'btn btn-sm btn-outline-danger' %>
                            </span>
                          <% end %>
                        </p>
                    <% end %>
                <% end %>
              </div>
            </div>
        <% end %>
    <% end %>
  </div>
</div>